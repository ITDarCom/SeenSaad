<template name="article">
    {{#with thisArticle}}
        {{#if allowReading}}
            <div class="panel panel-info">
                <div class="panel-heading">
                    <div class="row">
                        <div class="col-md-4">
                            <h4 class="text-center">
                                <ins>{{title}}</ins>
                            </h4>
                        </div>
                        <div class="col-md-4 text-center">
                            <span class="glyphicon glyphicon-user" aria-hidden="true"></span> {{username}}
                            <span class="glyphicon glyphicon-time" aria-hidden="true"></span> {{dateFormated createdAt}}
                        </div>
                        <div class="col-md-4 text-left">
                            {{#if owner}}
                                <button class="remove btn-xs btn btn-danger" title="حذف">
                                    <i class="fa fa-trash"></i>
                                </button>
                                <button id="editButton" class="edit btn-xs btn btn-warning" title="تعديل">
                                    <i class="fa fa-pencil"></i>
                                </button>
                            {{/if}}
                            <button class="favorite btn-xs btn btn-success" title="إضافة إلى المفضلة">
                                <i class="fa {{#if favorite}}fa-heart-o{{else}}fa-heart{{/if}}"></i>
                            </button>
                        </div>
                    </div>
                </div>
                <div class="panel-body">
                    <div class="textEditor" name="textEditor">{{{body}}}</div>
                </div>
            </div>
            <hr>

            <!--Comments-->
            {{#each comments}}
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <span class="glyphicon glyphicon-user" aria-hidden="true"></span> {{userUsername commenter}}
                        &nbsp;&nbsp;
                        <span class="glyphicon glyphicon-time" aria-hidden="true"></span> {{momentIt createdAt}}
                    </div>
                    <div class="panel-body">
                        <div class="textEditor" name="textEditor">{{{nl2br commentText}}}</div>
                    </div>
                </div>
            {{/each}}
            {{#if allowContributing}}
                <!--add comments-->
                {{#autoForm id="addComments" type="update-pushArray"  doc=this collection="Articles"  scope="comments" }}
                    <div class="row">
                        <div class="col-md-11 col-xs-10 commentTextarea">
                            {{> afQuickField name="commentText" label=false id="commentTextArea" class="commentTextarea"}}</div>
                        <div class="col-md-1 col-xs-2 commentDivBtn">
                            <button type="submit" class="btn btn-success commentBtn">أضف</button>
                        </div>
                    </div>
                {{/autoForm}}
            {{/if}}
        {{else}}
            <div class="alert alert-warning">
                <strong>عفواً!</strong>
                <blockquote>يبدو أن الموضوع الذي تقوم بالوصول إليه غير متاح</blockquote>
            </div>
        {{/if}}
    {{/with}}
</template>