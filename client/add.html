<template name='add'>
    {{#if canEdit}}
        <div class='row'>

{{>loadingModal}}
            <div class='col-md-offset-1 col-md-10'>
                {{> headerText}}
                {{#autoForm  
                    doc=thisArticle  
                    id='addUpdateArticles'  
                    name='addUpdateArticles' 
                    schema=schemaTarget  
                    meteormethod=methodTarget 
                    validation="submit"
                    type=formType }}

                    {{#if allowedTime}}
                        {{> afQuickField name='title'}}
                        {{> afQuickField name='body'}}
                    {{else}}
                        {{> afQuickField name='title' disabled=true}}
                        <div class="panel panel-default">
                            <div class="panel-heading"><i class="fa fa-lock"></i> محتوى مغلق لا يمكن تعديله</div>
                            <div class="panel-body">
                                {{{bodyText}}}
                                <br>

                                <div class="pull-left">{{>Time data=createdAt}}</div>
                                <hr>
                                {{> additions data= currentId}}
                            </div>
                        </div>
                        {{> afQuickField name='addition' label=false value=lastAddition}}
                    {{/if}}

                    <div class="row">
                        <div class='{{#if afFieldValueIs name="contributingPermissions" value="1"}}col-md-2 col-xs-2
                                    {{else}}col-xs-12 col-md-12{{/if}}'>
                            {{> afQuickField name='contributingPermissions' id='contributingPermissions' value=this.contributingPermissions}}
                        </div>
                        {{#if afFieldValueIs name='contributingPermissions' value='1'}}
                            <div class='col-md-10 col-xs-10'>
                                {{> afQuickField name='contributingIds' id='contributingIds' type="text"
                                label=false   }}
                            </div>{{/if}}
                    </div>
                    {{#if afFieldValueIs name="contributingPermissions" value="1"}}
                        <div class='row'>
                            <div class='{{#if afFieldValueIs name="readingPermissions" value="1"}}
                                                col-xs-2 col-md-2{{else}}col-xs-12 col-md-12{{/if}}'>
                                {{> afQuickField name='readingPermissions' id='readingPermissions'}}</div>
                            {{#if afFieldValueIs name='readingPermissions' value='1'}}
                                <div class='col-xs-10 col-md-10'>
                                    {{> afQuickField label=false  name='readingIds' id='readingIds' type="text" }}</div>
                            {{/if}}
                        </div>
                    {{/if}}
                    <button 
                        id="submit-button"
                        type='submit' class='btn btn-block btn-primary'>
                        {{saveButton}}</button>
                {{/autoForm}}
            </div>
        </div>
    {{else}}
        <div class='alert alert-warning'>
            <blockquote> {{getArabicMsg articleAccessDenied}}</blockquote>
        </div>
    {{/if}}

</template>

<template name="loadingModal">

    <div class="modal fade" id="myModal" role="dialog">
        <div class="modal-dialog modal-sm">
    <div class="modal-content">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">&times;</button>
            <h4 class="modal-title">Modal Header</h4>
        </div>
        <div class="modal-body">
            <p>Some text in the modal.</p>
        </div>
        <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        </div>
    </div>
        </div>
    </div>

</template>
